#include "std/io.eth"

int producer(int val) {
    return val * 2;
}

coroutine(int) get_co(int v) {
    return spawn producer(v);
}

int main() {
    // Test 1: coroutine(int)
    coroutine(int) c1 = get_co(21);
    int res = await c1;
    printf("Result: %d\n", res); // EXPECTED_OUTPUT: Result: 42

    // Test 2: ptr(int)
    ptr(int) p = malloc(4);
    free(p);
    
    // Test 3: nested generics (syntax check)
    // coroutine(ptr(int)) c2; // Not fully supported yet by VM but syntax should work
    
    return 0;
}
