#include "std/io.eth"

i32 producer(i32 val) {
    return val * 2;
}

coroutine(i32) get_co(i32 v) {
    return spawn producer(v);
}

i32 main() {
    // Test 1: coroutine(i32)
    coroutine(i32) c1 = get_co(21);
    i32 res = await c1;
    printf("Result: %d\n", res); // EXPECTED_OUTPUT: Result: 42

    // Test 2: array syntax
    [2]i32 p;
    p[0] = 1;
    p[1] = 2;
    
    // Test 3: nested generics (syntax check)
    // coroutine(ptr(i32)) c2; // Not fully supported yet by VM but syntax should work
    
    return 0;
}
